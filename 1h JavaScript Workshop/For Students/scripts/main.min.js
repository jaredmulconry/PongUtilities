"use strict";function setupGame(e,a){player1=new Paddle(new Vector(32,a/2),"red",KEY_W,KEY_S),player2=new Paddle(new Vector(e-32,a/2),"blue",KEY_I,KEY_K),ball=new Ball(new Vector(.5*e,.5*a),"black",8),arenaWalls=new ScreenBounds(new Vector(e,a))}function updateGame(e,a,n,t){player1.update(e,a),player2.update(e,a),ball.update(e)}function drawGame(e,a,n){fillBackground(e,a,n,backgroundColor),player1.draw(e),player2.draw(e),ball.draw(e)}function fillBackground(e,a,n,t){e.fillStyle=t,e.fillRect(0,0,a,n)}function updateDeltaTime(){var e=Date.now(),a=e-previousFrameTime;return previousFrameTime=e,.001*a}function update(){var e=updateDeltaTime();updateGame(e,kb,gameSize.x,gameSize.y),kb.update(),gameRestarting?gameRestarting=!1:updateRequest=window.requestAnimationFrame(update)}function draw(){drawGame(context,gameSize.x,gameSize.y)}function prepare(){gameSize.set(canvas.scrollWidth,canvas.scrollHeight),canvas.width=gameSize.x,canvas.height=gameSize.y,setupGame(gameSize.x,gameSize.y)}function prepareAndRun(){prepare(),updateRequest=window.requestAnimationFrame(update)}function redraw(){draw(),window.requestAnimationFrame(redraw)}var backgroundColor="gray",KEY_W=87,KEY_S=83,KEY_I=73,KEY_K=75,player1,player2,ball,arenaWalls,gameRestarting=!1,previousFrameTime=Date.now(),canvas=document.getElementById("GameCanvas"),context=canvas.getContext("2d"),gameSize=new Vector;canvas.addEventListener("onresize",function(){prepare()});var updateRequest,drawRequest,kb=new Keyboard;(function(){var e,a=0,n=["ms","moz","webkit","o"],t=n.length;for(e=0;e<t&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[n[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[e]+"CancelAnimationFrame"]||window[n[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var t=(new Date).getTime(),r=Math.max(0,16-(t-a)),i=window.setTimeout(function(){e(t+r)},r);return a=t+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})(),window.requestAnimationFrame(prepareAndRun),window.requestAnimationFrame(redraw);