"use strict";function resolveCollision(i,o){var e=arguments[2]instanceof ResolutionInfo?arguments[2]:new ResolutionInfo(i,Vector.zero,o);switch(e.position.set(i),e.direction.set(Vector.zero),e.collision=o,o.dir){case HIT_NONE:break;case HIT_LEFT:e.position.x+=o.overlap,e.direction.x=1;break;case HIT_RIGHT:e.position.x-=o.overlap,e.direction.x=-1;break;case HIT_UP:e.position.y+=o.overlap,e.direction.y=1;break;case HIT_DOWN:e.position.y-=o.overlap,e.direction.y=-1}return e}function checkCollision(i,o,e,t,r,n,s,l){var a=.5*e,c=.5*s,u=.5*t,p=.5*l;return calculateMinOverlap({l:i-a,r:i+a,u:o-u,d:o+u},{l:r-c,r:r+c,u:n-p,d:n+p})}function checkScreenBounds(i,o,e,t,r,n){var s=.5*e,l=.5*t;return calculateInverseMinOverlap({l:i-s,r:i+s,u:o-l,d:o+l},{l:0,r:r,u:0,d:n})}function calculateInverseMinOverlap(i,o){var e,t={dir:HIT_NONE,overlap:Number.MAX_VALUE};return i.l<o.l&&(e=o.l-i.l,e<t.overlap&&(t.overlap=e,t.dir=HIT_LEFT)),i.r>o.r&&(e=i.r-o.r,e<t.overlap&&(t.overlap=e,t.dir=HIT_RIGHT)),i.u<o.u&&(e=o.u-i.u,e<t.overlap&&(t.overlap=e,t.dir=HIT_UP)),i.d>o.d&&(e=i.d-o.d,e<t.overlap&&(t.overlap=e,t.dir=HIT_DOWN)),t}function calculateMinOverlap(i,o){var e={dir:HIT_NONE,overlap:Number.MAX_VALUE},t=i.l-o.r<0&&i.l-o.l>0,r=i.r-o.l>0&&i.r-o.r<0,n=i.u-o.d<0&&i.u-o.u>0,s=i.d-o.u>0&&i.d-o.d<0;if(t&&(s||n)||r&&(s||n)){var l=o.r-i.l;l<e.overlap&&(e.overlap=l,e.dir=HIT_LEFT);var l=i.r-o.l;l<e.overlap&&(e.overlap=l,e.dir=HIT_RIGHT);var l=o.d-i.u;l<e.overlap&&(e.overlap=l,e.dir=HIT_UP);var l=i.d-o.u;l<e.overlap&&(e.overlap=l,e.dir=HIT_DOWN)}return e}var HIT_NONE=0,HIT_LEFT=1,HIT_RIGHT=2,HIT_UP=3,HIT_DOWN=4,AABB=function(i){this.position=new Vector(Vector.zero),this.size=new Vector(i),this.halfSize=this.size.scale(.5),this.bounds={l:-this.halfSize.x,r:this.halfSize.x,u:-this.halfSize.y,d:this.halfSize.y}};AABB.prototype.setPosition=function(i){this.position.set(i)},AABB.prototype.setSize=function(i){this.size.set(i),this.halfSize.set(this.size.scale(.5))},AABB.prototype.updateBounds=function(){this.bounds.l=this.position.x-this.halfSize.x,this.bounds.r=this.position.x+this.halfSize.x,this.bounds.u=this.position.y-this.halfSize.y,this.bounds.d=this.position.y+this.halfSize.y};var AABBIntersection=function(i,o){this.direction=new Vector(i),this.overlap=o},CollisionInfo=function(i){this.intersections=[],this.other=i};CollisionInfo.prototype.isColliding=function(){return 0!=this.intersections.length},CollisionInfo.prototype.addIntersection=function(i){var o=this.intersections.findIndex(function(o){return o.overlap<i.overlap});this.intersections.splice(o,0,i)},CollisionInfo.prototype.getMinIntersection=function(){return this.intersections[0]};var ResolutionInfo=function(i,o,e){this.position=new Vector(i),this.direction=new Vector(o),this.collision=e},BoxConstraint=AABB;