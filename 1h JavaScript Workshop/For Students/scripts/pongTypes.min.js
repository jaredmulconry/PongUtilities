"use strict";function roundToInt(i){return~~(.5+i)}var Paddle=function(i,t,o,s){this.position=i,this.color=t,this.direction=0,this.upControl=o,this.downControl=s,this.collider=new AABB(Paddle.size),this.collider.setPosition(this.position),this.collider.updateBounds()};Paddle.size=new Vector(16,64),Paddle.halfSize=Paddle.size.scale(.5),Paddle.speed=128,Paddle.prototype.handleCollision=function(i){this.position.set(i.position),this.collider.setPosition(this.position),this.collider.updateBounds()},Paddle.prototype.update=function(i,t){this.direction=0,t.getKey(this.upControl)&&(this.direction-=1),t.getKey(this.downControl)&&(this.direction+=1),this.position.y+=this.direction*Paddle.speed*i,this.collider.setPosition(this.position),this.collider.updateBounds()},Paddle.prototype.draw=function(i){i.fillStyle=this.color,i.fillRect(roundToInt(this.position.x-Paddle.halfSize.x),roundToInt(this.position.y-Paddle.halfSize.y),Paddle.size.x,Paddle.size.y)};var Ball=function(i,t){for(this.position=i,this.color=t,this.currentSpeed=Ball.startSpeed,this.collider=new AABB(Ball.size),this.direction=new Vector(Math.random(),Math.random()).subtract(new Vector(.5,.5)).scale(2);this.direction.equals(Vector.zero);)this.direction.x=2*(Math.random()-.5),this.direction.y=2*(Math.random()-.5);this.direction.normalize(),this.collider.setPosition(this.position),this.collider.updateBounds()};Ball.startSpeed=64,Ball.radius=8,Ball.halfSize=new Vector(Ball.radius,Ball.radius),Ball.size=Ball.halfSize.scale(2),Ball.prototype.handleCollision=function(i){this.position.set(i.position),this.collider.setPosition(this.position),this.collider.updateBounds(),0!=i.direction.x?this.direction.x*=-1:0!=i.direction.y&&(this.direction.y*=-1)},Ball.prototype.update=function(i){this.position.addTo(this.direction.scale(this.currentSpeed).scale(i)),this.collider.setPosition(this.position),this.collider.updateBounds()},Ball.prototype.draw=function(i){i.fillStyle=this.color,i.beginPath(),i.arc(roundToInt(this.position.x),roundToInt(this.position.y),Ball.radius,0,2*Math.PI),i.fill()};var ScreenBounds=function(i){this.size=new Vector(i),this.position=this.size.scale(.5),this.collider=new BoxConstraint(this.size),this.collider.setPosition(this.position),this.collider.updateBounds()};ScreenBounds.prototype.setSize=function(i){this.size.set(i),this.position.set(this.size.scale(.5)),this.collider.setPosition(this.position),this.collider.setSize(this.size),this.collider.updateBounds()};